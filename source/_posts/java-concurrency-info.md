---
title: java并发编程艺术
date: 2018-12-01 09:00:00
categories:
  - Java
  - Concurrent
---

- #### 并发不一定比同步程序快
> 1. 线程创建需要时间
> 
> 2. 上下文切换需要时间

- #### 如何减少上线文切换
> - 无锁并发编程：使用hash算法将数据分段给不同线程处理，保证每次同一ID数据都由同一个线程处理。
> 
> - CAS算法：java的Atomic包中提供了CAS算法。
> 
> - 使用最少线程：减少不必要的线程创建和切换开销
> 
> - 协程：在一个线程中实现多任务调度，并在其他线程中维持多个任务间的切换。
>

- #### 资源限制的挑战
    - 在某些情况下，受限于软硬件资源的限制，我们采取不同的处理方式：
    1. 硬件限制：考虑使用集群来处理
    2. 软件限制：考虑资源复用，如数据库连接、socket等。
    - 在资源受限的条件下进行并发：核心思想就是根据不同的类型调整并发数。

##### 相关工具

- `ps -ef|grep Scratch ` 找到pid
- `jstack 1498` 打印完整内存信息

![deadLock-1.webp](/assets/img/deadLock-1.webp)
